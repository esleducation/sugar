!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.localStorageFonts=o():t.localStorageFonts=o()}(this,function(){return function(t){function o(n){if(e[n])return e[n].exports;var s=e[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,o),s.loaded=!0,s.exports}var e={};return o.m=t,o.c=e,o.p="",o(0)}({0:function(t,o,e){t.exports=e(192)},192:function(t,o){"use strict";function e(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}o.__esModule=!0;var n=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},s=function(){function t(){e(this,t),this.settings={version:1,json_path:"/fonts/fonts.json",debug:!1}}return t.prototype.init=function(){var t=this,o=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.settings=n({},this.settings,o);var e=this.settings.json_path.split("#");2==e.length&&(this.settings.version=e[1],this.settings.json_path=e[0]);try{this._cache=window.localStorage.getItem("sugar-fonts"),this._cache&&(this._cache=JSON.parse(this._cache),this._cache.version==this.settings.version?(this._debug("No new version of you fonts"),this._insertFonts(this._cache.value)):(this._debug("New version of your fonts"),window.localStorage.removeItem("sugar-fonts"),this._cache=null))}catch(s){this._debug("Your browser seems to not support the localStorage api")}this._cache||window.addEventListener("load",function(o){var e=new XMLHttpRequest,n=void 0;console.log(t),e.open("GET",t.settings.json_path,!0),e.onload=function(){if(200==e.status)try{n=JSON.parse(e.responseText);var o="";n.fonts.forEach(function(t){o+="@font-face{";for(var e in t){var n=t[e];"font-family"==e&&(n='"'+n+'"'),o+=e+":"+n+";"}o+="}"}),t._insertFonts(o),window.localStorage.setItem("sugar-fonts",JSON.stringify({version:t.settings.version,value:o}))}catch(s){}},e.send()})},t.prototype._insertFonts=function(t){this._debug("inserting fonts");var o=document.createElement("style");o.innerHTML=t,document.head.appendChild(o)},t.prototype._debug=function(){this.settings.debug&&console.log("SUGAR-LOCALSTORAGEFONTS",arguments)},t}();null==window.sugar&&(window.sugar={}),window.sugar.sLocalStorageFonts=new s,o["default"]=window.sugar.sLocalStorageFonts}})});