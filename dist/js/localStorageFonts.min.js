!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.localStorageFonts=e():t.localStorageFonts=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return t[o].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}({0:function(t,e,n){t.exports=n(161)},161:function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=function(){function t(){n(this,t),this.settings={version:1,json_path:"/fonts/fonts.json",debug:!1}}return t.prototype.init=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.settings=o({},this.settings,e);var n=this.settings.json_path.split("#");2==n.length&&(this.settings.version=n[1],this.settings.json_path=n[0]);try{this._cache=window.localStorage.getItem("sugar-fonts"),this._cache&&(this._cache=JSON.parse(this._cache),this._cache.version==this.settings.version?(this._debug("No new version of you fonts"),this._insertFonts(this._cache.value)):(this._debug("New version of your fonts"),window.localStorage.removeItem("sugar-fonts"),this._cache=null))}catch(s){this._debug("Your browser seems to not support the localStorage api")}this._cache||window.addEventListener("load",function(e){var n=new XMLHttpRequest,o=void 0;console.log(t),n.open("GET",t.settings.json_path,!0),n.onload=function(){if(200==n.status)try{o=JSON.parse(n.responseText);var e="";o.fonts.forEach(function(t){e+="@font-face{";for(var n in t){var o=t[n];"font-family"==n&&(o='"'+o+'"'),e+=n+":"+o+";"}e+="}"}),t._insertFonts(e),window.localStorage.setItem("sugar-fonts",JSON.stringify({version:t.settings.version,value:e}))}catch(s){}},n.send()})},t.prototype._insertFonts=function(t){this._debug("inserting fonts");var e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)},t.prototype._debug=function(){this.settings.debug&&console.log("SUGAR-LOCALSTORAGEFONTS",arguments)},t}();null==window.sugar&&(window.sugar={}),window.sugar.sLocalStorageFonts=new s,e["default"]=window.sugar.sLocalStorageFonts}})});